<!DOCTYPE html>
<html>
<head>
	<title>I dont know why?</title>
	<script type="text/javascript" src="jq.js"></script>
	<script type="text/javascript">
		var id=1;
		var active=0;
		var arr_name=Array();
		var arr_size=Array();
		var arr_exist=Array();
		var max=1;
		var q=0;
		function add_string()
		{
			q++;
			var color=Math.floor(Math.random()*7);
			for (var i=1; i<id; i++)
			{
				if (arr_exist[i])
				{
				arr_name[i]=document.getElementById('name'+i).value;
				arr_size[i]=document.getElementById('size'+i).value;
				}
			}
			console.log(arr_name);
			document.getElementById('add_here').innerHTML+="<div id='del" + id + "' style='background-color: #f0f0f0; display: flex; justify-content: 	space-around;'><input value='' onfocus='active_up(" + id + ")' id='name" + id + "' type='text' style='width: 50%;'><input value='' onfocus='active_up(" + id + ")' id='size" + id + "' type='text' style='width: 50%;'><div onclick='del(" + id + ")' style='position:absolute; cursor:pointer; padding:0; color: red; left: 102%;'>Del</div></div>";
			document.getElementById('add_dia').innerHTML+="<div id='dia" + id + "' onmouseout='how_much_hide(" + id + ")' onmouseover='how_much(" + id + ")' style='margin: 2px; margin-bottom: 0px;  height:1%; background-color: red; width:4%;'></div><div style='position:relative'><div id='show" + id + "' style=' display:none;'>0%</div></div>";
			arr_exist[id]=1;
			for (var i=1; i<id; i++)
			{
				if (arr_exist[i])
				{
				$("#name"+i).attr("value",arr_name[i]); 
				$("#size"+i).attr("value",arr_size[i]); 
				}
			}
			id++;
			console.log(id);

		}
		function del(val)
		{
			document.getElementById('del'+val).innerHTML="";
			$('#dia'+val).attr("style","display:none;");
			arr_exist[val]=0;
		}
		function active_up(val)
		{
			active=val;
		}
		function how_much(val)
		{
			$("#show"+val).attr("style","background-color:#303030; color:#f0f0f0; position:absolute; display:block;");
		}
		function how_much_hide(val)
		{
			$("#show"+val).attr("style","display:none;");
		}
		function refresh_dia()
		{
			max=0;
			for (var i=1; i<=q; i++)
			{
				if ((+document.getElementById('size' + i).value)>(+max)) max =document.getElementById('size' + i).value;
			}
		for (var i=1; i<=q; i++)
		{
			if (document.getElementById('size' + i).value<603628)
			{
				$("#dia"+i).attr("style","margin: 2px; margin-bottom: 0px;  height:" + (document.getElementById('size' + i).value/max)*100 + "%; background-color: red; width:4%;"); 
				document.getElementById('show'+i).innerHTML=document.getElementById('name' + i).value + ":" + document.getElementById('size' + i).value +"km^2";
			}
		}
		}
	</script>
	<style type="text/css">
		input:focus
		{
			outline: none;
		}
	</style>
</head>
<body onkeyup="refresh_dia()" onkeypress="refresh_dia()">
	<div style="position: absolute; width: 30%; left:35%; display: flex; flex-direction: column;">
		<div id="add_here">
		<div style="background-color: #707070; display: flex; justify-content: 	space-around;"><span>Назва області</span><span>Площа</span></div>

		</div>
		<input onclick="add_string()" style="width: 30%; margin-top: 3px; background-color: yellow; border: none; margin-bottom: 3px;" type="button" value="Додати рядок" name="">
		<div id="add_dia" style="position: relative; height: 100px; min-width: 100%; background-color: #f0f0f0; display: flex; flex-direction: row; align-items: flex-end;">

		</div>
	</div>
	
</body>
</html>